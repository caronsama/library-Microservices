{"version":3,"sources":["webpack:///./src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?42ea","webpack:///./src/views/Dashboard.vue?acbf"],"names":["class","aria-hidden","id","style","gutter","displayedCards","item","span","key","title","xlink:href","icon","data","cards","cards2","user","computed","this","role","created","userJson","sessionStorage","getItem","router","push","JSON","parse","mounted","circleTimer","request","get","then","res","code","lendRecordCount","visitCount","bookCount","userCount","error","msg","myChart","echarts","document","getElementById","console","log","setOption","text","tooltip","trigger","grid","left","right","bottom","containLabel","xAxis","type","map","axisTick","alignWithLabel","yAxis","series","label","show","barWidth","value","itemStyle","color","window","addEventListener","resize","lendSize","bookstatus","seatstatus","seatSize","methods","getTimer","setInterval","d","Date","t","toLocaleString","innerHTML","__exports__","render"],"mappings":"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","file":"static/js/chunk-539bdf2a.5f51bf58.js","sourcesContent":["<template>\n  <div>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"6\" v-for=\"item in displayedCards\" :key=\"item.title\">\n        <el-card class=\"box-card\">\n          <div class=\"clearfix\">{{ item.title }}</div>\n          <div class=\"text item\">\n            <svg class=\"icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"item.icon\" style=\"width: 100px\"></use>\n            </svg>\n            <span class=\"text\">{{ item.data }}</span>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n    <div id=\"myTimer\" style=\"margin-left: 15px;font-weight: 550;\"></div>\n    <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->\n    <div id=\"main\" style=\"margin-left: 5px\"></div>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts'\nimport { ElMessage } from \"element-plus\";\nimport request from \"../utils/request\";\nimport router from \"@/router\";\n\nexport default {\n  data() {\n    return {\n      cards: [\n        { title: '总借阅', data: 100, icon: '#iconlend-record-pro' },\n        { title: '每天总访问', data: 100, icon: '#iconvisit' },\n        { title: '图书数', data: 100, icon: '#iconbook-pro' },\n        { title: '用户数', data: 1000, icon: '#iconpopulation' }\n      ], cards2: [\n        { title: '已借阅', data: 100, icon: '#iconlend-record-pro' },\n        { title: '借书信用分', data: 100, icon: '#iconvisit' },\n        { title: '订座信用分', data: 100, icon: '#iconbook-pro' },\n        { title: '未使用的订座', data: 1000, icon: '#iconpopulation' }\n      ],\n      data: {},\n      user: {}\n    }\n  },\n  computed: {\n    displayedCards() {\n      return this.user.role === 1 ? this.cards : this.cards2;\n    },\n  },\n  created() {\n    let userJson = sessionStorage.getItem(\"user\")\n    if (!userJson) {\n      router.push(\"/login\")\n    }\n    this.user = JSON.parse(userJson)\n  },\n  mounted() {\n    this.circleTimer()\n    if (this.user.role === 1) {\n      request.get(\"/dashboard/super\").then(res => {\n        if (res.code == 0) {\n\n          this.cards[0].data = res.data.lendRecordCount\n          this.cards[1].data = res.data.visitCount\n          this.cards[2].data = res.data.bookCount\n          this.cards[3].data = res.data.userCount\n\n        }\n        else {\n          ElMessage.error(res.msg)\n        }\n\n\n        // 基于准备好的dom，初始化echarts实例\n        var myChart = echarts.init(document.getElementById('main'))\n        console.log(this.cards[0].data)\n        // 绘制图表\n        myChart.setOption({\n          title: {\n            text: '统计'\n          },\n          tooltip: {\n            trigger: 'axis'\n            // axisPointer: {\n            //   type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n            // }\n          },\n          grid: {\n            left: '3%',\n            right: '4%',\n            bottom: '3%',\n            containLabel: true\n          },\n          xAxis: {\n            type: 'category',\n            data: this.cards.map(item => item.title),\n            axisTick: {\n              alignWithLabel: true\n            }\n          },\n          yAxis: {\n            type: 'value'\n          },\n          series: [\n            {\n              type: 'bar',\n              label: { show: true },\n              barWidth: '25%',\n              data: [\n                {\n                  value: this.cards[0].data,\n                  itemStyle: { color: '#5470c6' }\n                },\n                {\n                  value: this.cards[1].data,\n                  itemStyle: { color: '#91cc75' }\n                },\n                {\n                  value: this.cards[2].data,\n                  itemStyle: { color: '#fac858' }\n                },\n                {\n                  value: this.cards[3].data,\n                  itemStyle: { color: '#ee6666' }\n                }\n              ]\n            }\n          ]\n        })\n        window.addEventListener('resize', () => {\n          myChart.resize()\n        })\n      })\n    } else if (this.user.role === 2) {\n      request.get(\"/dashboard/user?uid=\" + this.user.id).then(res => {\n        if (res.code == 0) {\n\n          this.cards2[0].data = res.data.lendSize\n          this.cards2[1].data = res.data.bookstatus\n          this.cards2[2].data = res.data.seatstatus\n          this.cards2[3].data = res.data.seatSize\n\n        }\n        else {\n          ElMessage.error(res.msg)\n        }\n\n\n        // 基于准备好的dom，初始化echarts实例\n        var myChart = echarts.init(document.getElementById('main'))\n        console.log(this.cards2[0].data)\n        // 绘制图表\n        myChart.setOption({\n          title: {\n            text: '统计'\n          },\n          tooltip: {\n            trigger: 'axis'\n            // axisPointer: {\n            //   type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n            // }\n          },\n          grid: {\n            left: '3%',\n            right: '4%',\n            bottom: '3%',\n            containLabel: true\n          },\n          xAxis: {\n            type: 'category',\n            data: this.cards2.map(item => item.title),\n            axisTick: {\n              alignWithLabel: true\n            }\n          },\n          yAxis: {\n            type: 'value'\n          },\n          series: [\n            {\n              type: 'bar',\n              label: { show: true },\n              barWidth: '25%',\n              data: [\n                {\n                  value: this.cards2[0].data,\n                  itemStyle: { color: '#5470c6' }\n                },\n                {\n                  value: this.cards2[1].data,\n                  itemStyle: { color: '#91cc75' }\n                },\n                {\n                  value: this.cards2[2].data,\n                  itemStyle: { color: '#fac858' }\n                },\n                {\n                  value: this.cards2[3].data,\n                  itemStyle: { color: '#ee6666' }\n                }\n              ]\n            }\n          ]\n        })\n        window.addEventListener('resize', () => {\n          myChart.resize()\n        })\n      })\n    }\n  },\n  methods: {\n    circleTimer() {\n      this.getTimer()\n      setInterval(() => {\n        this.getTimer()\n      }, 1000)\n    },\n    getTimer() {\n      var d = new Date()\n      var t = d.toLocaleString()\n      document.getElementById('myTimer').innerHTML = t\n    }\n  }\n}\n</script>\n\n<style scoped>\n.box-card {\n  width: 80%;\n  margin-bottom: 25px;\n  margin-left: 10px;\n}\n\n.clearfix {\n  text-align: center;\n  font-size: 15px;\n}\n\n.text {\n  text-align: center;\n  font-size: 24px;\n  font-weight: 700;\n  vertical-align: super;\n}\n\n#main {\n  width: 100%;\n  height: 450px;\n  margin-top: 20px;\n}\n\n.icon {\n  width: 50px;\n  height: 50px;\n  padding-top: 5px;\n  padding-right: 10px;\n}\n</style>","import { render } from \"./Dashboard.vue?vue&type=template&id=0bbe0e76&scoped=true\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=0bbe0e76&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\IDEA\\\\Project\\\\Library-master_springboot\\\\Library-master\\\\vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0bbe0e76\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Dashboard.vue?vue&type=style&index=0&id=0bbe0e76&scoped=true&lang=css\""],"sourceRoot":""}